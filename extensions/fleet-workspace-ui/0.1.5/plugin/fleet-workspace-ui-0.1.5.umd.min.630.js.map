{"version":3,"file":"fleet-workspace-ui-0.1.5.umd.min.630.js","mappings":"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","sources":["webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/SelectPrincipal.vue?28e6","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/SelectPrincipal.vue","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/SelectPrincipal.vue?1afc","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/Principal.vue","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/Principal.vue?541a","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/SelectPrincipal.vue?51cb","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/SelectPrincipal.vue?ece2","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/SelectPrincipal.vue?eb67","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/Principal.vue?0351","webpack://fleet-workspace-ui-0.1.5/../../node_modules/@rancher/shell/components/auth/Principal.vue?24b9"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../../vue-loader/dist/stylePostLoader.js!../../../../postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../../postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../../sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./SelectPrincipal.vue?vue&type=style&index=1&id=dd5e86d0&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"728bb12b\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<script>\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Principal from '@shell/components/auth/Principal';\nimport debounce from 'lodash/debounce';\nimport { _EDIT } from '@shell/config/query-params';\nimport { NORMAN } from '@shell/config/types';\n\nexport default {\n  emits: ['add'],\n\n  components: {\n    LabeledSelect,\n    Principal,\n  },\n\n  props: {\n    mode: {\n      type:    String,\n      default: _EDIT,\n    },\n\n    showMyGroupTypes: {\n      type: Array,\n      default(props) {\n        return ['group', 'user'];\n      },\n    },\n\n    searchGroupTypes: {\n      type:    String,\n      default: null,\n      validator(val) {\n        return val === null || val === 'group' || val === 'user';\n      }\n    },\n\n    retainSelection: {\n      type:    Boolean,\n      default: false\n    },\n\n    project: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  async fetch() {\n    this.principals = await this.$store.dispatch('rancher/findAll', {\n      type: NORMAN.PRINCIPAL,\n      opt:  { url: '/v3/principals' }\n    });\n\n    this.options = this.suggested;\n  },\n\n  data() {\n    return {\n      principals:     null,\n      searchStr:      '',\n      options:        [],\n      newValue:       '',\n      tooltipContent: null,\n    };\n  },\n\n  computed: {\n    suggested() {\n      const out = this.principals.filter((x) => {\n        if ( !x.memberOf ) {\n          return false;\n        }\n\n        if ( !this.showMyGroupTypes.includes(x.principalType) ) {\n          return false;\n        }\n\n        return true;\n      })\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((x) => x.id);\n\n      return out;\n    },\n\n    label() {\n      return this.retainSelection ? this.t('cluster.memberRoles.addClusterMember.labelSelect') : this.t('cluster.memberRoles.addClusterMember.labelAdd');\n    },\n\n    placeholder() {\n      return this.project ? this.t('projectMembers.projectPermissions.searchForMember') : this.t('cluster.memberRoles.addClusterMember.placeholder');\n    }\n  },\n\n  created() {\n    this.debouncedSearch = debounce(this.search, 200);\n  },\n\n  methods: {\n    setTooltipContent() {\n      if (!this.retainSelection) {\n        return;\n      }\n      if (this.principals) {\n        const selected = this.principals.find((p) => p.id === this.newValue);\n\n        this.tooltipContent = selected?.name;\n      } else {\n        this.tooltipContent = null;\n      }\n    },\n    resetTooltipContent() {\n      if (!this.retainSelection) {\n        return;\n      }\n      this.tooltipContent = null;\n    },\n    add(id) {\n      if (!id) {\n        // Ignore attempts to select an invalid principal\n        return;\n      }\n\n      this.$emit('add', id);\n      if (!this.retainSelection) {\n        this.newValue = '';\n      }\n    },\n\n    onSearch(str, loading) {\n      str = (str || '').trim();\n\n      this.searchStr = str;\n\n      if ( str ) {\n        loading(true);\n        this.debouncedSearch(str, loading);\n      } else {\n        this.search(null, loading);\n      }\n    },\n\n    async search(str, loading) {\n      if ( !str ) {\n        this.options = this.suggested.slice();\n        loading(false);\n\n        return;\n      }\n\n      try {\n        const res = await this.$store.dispatch('rancher/collectionAction', {\n          type:       NORMAN.PRINCIPAL,\n          actionName: 'search',\n          opt:        { url: '/v3/principals?action=search' },\n          body:       {\n            name:          str,\n            principalType: this.searchGroupTypes\n          }\n        });\n\n        if ( this.searchStr === str ) {\n          // If not, they've already typed something else\n          this.options = res.map((x) => x.id);\n        }\n      } catch (e) {\n        this.options = [];\n      } finally {\n        loading(false);\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <LabeledSelect\n    ref=\"labeled-select\"\n    v-model:value=\"newValue\"\n    v-clean-tooltip=\"{\n      content: tooltipContent,\n      placement: 'bottom',\n      popperClass: ['select-principal-tooltip']\n    }\"\n    :mode=\"mode\"\n    :label=\"label\"\n    :placeholder=\"placeholder\"\n    :options=\"options\"\n    :searchable=\"true\"\n    :filterable=\"false\"\n    class=\"select-principal\"\n    :class=\"{'retain-selection': retainSelection}\"\n    @update:value=\"add\"\n    @search=\"onSearch\"\n    @on-open=\"resetTooltipContent()\"\n    @on-close=\"setTooltipContent()\"\n  >\n    <template v-slot:no-options=\"{ searching }\">\n      <template v-if=\"searching\">\n        <span class=\"search-slot\">\n          {{ t('cluster.memberRoles.addClusterMember.noResults') }}\n        </span>\n      </template>\n      <div v-else>\n        <em class=\"search-slot\">\n          {{ t('cluster.memberRoles.addClusterMember.searchPlaceholder') }}\n        </em>\n      </div>\n    </template>\n\n    <template #option=\"option\">\n      <Principal\n        :value=\"option.label\"\n        :use-muted=\"false\"\n      />\n    </template>\n\n    <template\n      v-if=\"retainSelection\"\n      #selected-option=\"option\"\n    >\n      <Principal\n        :value=\"option.label\"\n        :use-muted=\"false\"\n        class=\"mt-10 mb-10\"\n      />\n    </template>\n  </LabeledSelect>\n</template>\n\n<style lang=\"scss\" scoped>\n  .search-slot{\n    color: var(--body-text);\n  }\n\n  .select-principal {\n    &.retain-selection {\n      min-height: 91px;\n      &.focused {\n        .principal {\n          display: none;\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"scss\">\n  .vs__dropdown-menu {\n    width: 0%;\n    * {\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n\n  .select-principal-tooltip {\n    max-width: 580px;\n    word-wrap: break-word;\n  }\n</style>\n","import { render } from \"./SelectPrincipal.vue?vue&type=template&id=dd5e86d0&scoped=true\"\nimport script from \"./SelectPrincipal.vue?vue&type=script&lang=js\"\nexport * from \"./SelectPrincipal.vue?vue&type=script&lang=js\"\n\nimport \"./SelectPrincipal.vue?vue&type=style&index=0&id=dd5e86d0&lang=scss&scoped=true\"\nimport \"./SelectPrincipal.vue?vue&type=style&index=1&id=dd5e86d0&lang=scss\"\n\nimport exportComponent from \"../../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dd5e86d0\"]])\n\nexport default __exports__","<script>\nimport { NORMAN } from '@shell/config/types';\n\nexport default {\n  props: {\n    value: {\n      type:     String,\n      required: true,\n    },\n\n    useMuted: {\n      type:    Boolean,\n      default: true,\n    },\n\n    showLabels: {\n      type:    Boolean,\n      default: false,\n    }\n  },\n\n  async fetch() {\n    this.loadData();\n  },\n\n  data() {\n    // Load from cache immediately if possible\n    return { principal: null };\n  },\n\n  computed: {\n    showBoth() {\n      const p = this.principal;\n\n      return p.name && p.loginName && p.name.trim().toLowerCase() !== p.loginName.trim().toLowerCase();\n    }\n  },\n\n  methods: {\n    async loadData() {\n      this.principal = this.$store.getters['rancher/byId'](NORMAN.PRINCIPAL, this.value);\n\n      if ( this.principal ) {\n        return;\n      }\n\n      const principalId = escape(this.value).replace(/\\//g, '%2F');\n\n      try {\n        this.principal = await this.$store.dispatch('rancher/find', {\n          type: NORMAN.PRINCIPAL,\n          id:   this.value,\n          opt:  { url: `/v3/principals/${ principalId }` }\n        });\n      } catch (e) {\n        console.error('Failed to fetch principal', this.value, principalId); // eslint-disable-line no-console\n      }\n    }\n  },\n\n  watch: {\n    value() {\n      this.loadData();\n    }\n  },\n};\n</script>\n\n<template>\n  <div\n    class=\"principal\"\n    :class=\"{'showLabels': showLabels}\"\n  >\n    <template v-if=\"!principal && $fetchState.pending\">\n      <div class=\"avatar\">\n        <div class=\"empty\">\n          <i class=\"icon icon-spinner icon-lg\" />\n        </div>\n      </div>\n      <div\n        v-clean-html=\"t('principal.loading', null, true)\"\n        class=\"name\"\n        :class=\"{'text-muted': useMuted}\"\n      />\n      <div class=\"description\" />\n    </template>\n\n    <template v-else-if=\"principal\">\n      <div class=\"avatar\">\n        <img\n          :src=\"principal.avatarSrc\"\n          :class=\"{'round': principal.roundAvatar}\"\n        >\n      </div>\n      <div\n        v-if=\"showLabels\"\n        class=\"name\"\n      >\n        <table>\n          <tbody>\n            <tr><th>{{ t('principal.name') }}: </th><td>{{ principal.name || principal.loginName }}</td></tr>\n            <tr><th>{{ t('principal.loginName') }}: </th><td>{{ principal.loginName }}</td></tr>\n            <tr><th>{{ t('principal.type') }}: </th><td>{{ principal.displayType }}</td></tr>\n          </tbody>\n        </table>\n      </div>\n      <template v-else>\n        <div class=\"name\">\n          <template v-if=\"showBoth\">\n            {{ principal.name }}\n            <span\n              v-if=\"principal.loginName\"\n              :class=\"{'text-muted': useMuted}\"\n            >({{ principal.loginName }})</span>\n          </template>\n          <template v-else-if=\"principal.name\">\n            {{ principal.name }}\n          </template>\n          <template v-else>\n            {{ principal.loginName }}\n          </template>\n        </div>\n        <div\n          class=\"description\"\n          :class=\"{'text-muted': useMuted}\"\n        >\n          {{ principal.displayType }}\n        </div>\n      </template>\n    </template>\n\n    <template v-else>\n      <div class=\"avatar\">\n        <div\n          class=\"empty\"\n          :class=\"{'text-muted': useMuted}\"\n        >\n          <i class=\"icon icon-warning icon-lg\" />\n        </div>\n      </div>\n      <div\n        v-t=\"'principal.error'\"\n        class=\"name text-error\"\n      />\n      <div\n        class=\"description\"\n        :class=\"{'text-muted': useMuted}\"\n      >\n        {{ value }}\n      </div>\n    </template>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $size: 40px;\n\n  .principal {\n    display: grid;\n    grid-template-areas:\n      \"avatar name\"\n      \"avatar description\";\n    grid-template-columns: $size auto;\n    grid-template-rows: auto math.div($size, 2);\n    column-gap: 10px;\n\n    th {\n      text-align: left;\n      font-weight: normal;\n      padding-right: 10px;\n    }\n\n    &.showLabels {\n      grid-template-areas:\n        \"avatar name\";\n      grid-template-columns: 60px auto;\n      grid-template-rows: 60px;\n      column-gap: 0;\n      .name {\n        line-height: unset;\n      }\n\n      table tr td:not(:first-of-type) {\n        padding-left: 10px;\n      }\n    }\n\n    .avatar {\n      grid-area: avatar;\n      text-align: center;\n\n      DIV.empty {\n        border: 1px solid var(--border);\n        line-height: $size;\n      }\n\n      IMG {\n        width: $size;\n        height: $size;\n      }\n\n      DIV.round, IMG.round {\n        border-radius: 50%;\n      }\n    }\n\n    .name {\n      grid-area: name;\n      line-height: math.div($size, 2);\n      overflow-wrap: anywhere;\n    }\n\n    .description {\n      grid-area: description;\n      line-height: math.div($size, 2);\n    }\n  }\n</style>\n","import { render } from \"./Principal.vue?vue&type=template&id=7e5b3098&scoped=true\"\nimport script from \"./Principal.vue?vue&type=script&lang=js\"\nexport * from \"./Principal.vue?vue&type=script&lang=js\"\n\nimport \"./Principal.vue?vue&type=style&index=0&id=7e5b3098&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e5b3098\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../../vue-loader/dist/stylePostLoader.js!../../../../postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../../postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../../sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./SelectPrincipal.vue?vue&type=style&index=0&id=dd5e86d0&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"24530cbf\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".search-slot[data-v-dd5e86d0]{color:var(--body-text)}.select-principal.retain-selection[data-v-dd5e86d0]{min-height:91px}.select-principal.retain-selection.focused .principal[data-v-dd5e86d0]{display:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".vs__dropdown-menu{width:0}.vs__dropdown-menu *{overflow-x:hidden;text-overflow:ellipsis}.select-principal-tooltip{max-width:580px;word-wrap:break-word}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../../vue-loader/dist/stylePostLoader.js!../../../../postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../../postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../../sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./Principal.vue?vue&type=style&index=0&id=7e5b3098&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8ead1808\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".principal[data-v-7e5b3098]{display:grid;grid-template-areas:\\\"avatar name\\\" \\\"avatar description\\\";grid-template-columns:40px auto;grid-template-rows:auto 20px;-moz-column-gap:10px;column-gap:10px}.principal th[data-v-7e5b3098]{text-align:left;font-weight:400;padding-right:10px}.principal.showLabels[data-v-7e5b3098]{grid-template-areas:\\\"avatar name\\\";grid-template-columns:60px auto;grid-template-rows:60px;-moz-column-gap:0;column-gap:0}.principal.showLabels .name[data-v-7e5b3098]{line-height:unset}.principal.showLabels table tr td[data-v-7e5b3098]:not(:first-of-type){padding-left:10px}.principal .avatar[data-v-7e5b3098]{grid-area:avatar;text-align:center}.principal .avatar DIV.empty[data-v-7e5b3098]{border:1px solid var(--border);line-height:40px}.principal .avatar IMG[data-v-7e5b3098]{width:40px;height:40px}.principal .avatar DIV.round[data-v-7e5b3098],.principal .avatar IMG.round[data-v-7e5b3098]{border-radius:50%}.principal .name[data-v-7e5b3098]{grid-area:name;line-height:20px;overflow-wrap:anywhere}.principal .description[data-v-7e5b3098]{grid-area:description;line-height:20px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["content","__esModule","default","module","id","locals","exports","add","key","class","_createBlock","_component_LabeledSelect","ref","value","$data","newValue","$event","$options","mode","$props","label","placeholder","options","searchable","filterable","_normalizeClass","retainSelection","onSearch","onOnOpen","_cache","resetTooltipContent","onOnClose","setTooltipContent","_createSlots","_withCtx","searching","_createElementBlock","_hoisted_1","_toDisplayString","_ctx","t","_hoisted_2","_createElementVNode","_hoisted_3","option","_createVNode","_component_Principal","_","name","fn","undefined","tooltipContent","emits","components","LabeledSelect","Principal","props","type","String","_EDIT","showMyGroupTypes","Array","searchGroupTypes","validator","val","Boolean","project","fetch","this","principals","$store","dispatch","NORMAN","PRINCIPAL","opt","url","suggested","data","searchStr","computed","out","filter","x","memberOf","includes","principalType","sort","a","b","localeCompare","map","created","debouncedSearch","debounce","search","methods","selected","find","p","$emit","str","loading","trim","slice","res","actionName","body","e","__exports__","render","showLabels","principal","$fetchState","pending","_Fragment","useMuted","src","avatarSrc","roundAvatar","loginName","displayType","_hoisted_4","showBoth","_createTextVNode","_createCommentVNode","_hoisted_5","_hoisted_6","required","loadData","toLowerCase","getters","principalId","escape","replace","console","error","watch","___CSS_LOADER_EXPORT___","push"],"sourceRoot":""}